# Platform-wide parameters for ArgoCD ApplicationSet
# Single-environment internal development platform
# Change these values when forking or migrating to different org/repo

repository:
  org: darede-labs
  name: idp-platform
  branch: main
  # Computed fields for convenience
  url: https://github.com/darede-labs/idp-platform
  raw_url: https://raw.githubusercontent.com/darede-labs/idp-platform

github:
  org: darede-labs
  appName: daredelabs-idp-backstage
  appRepoPrefix: "idp-"
  repoRegex: "^idp-.*$"
  appRepoVisibility: private  # public | private
  scmAuth: token              # token | app (if app, requires GITHUB_APP_* in .env)
  actionsRoleName: github-actions-ecr-push # IAM Role name assumed by GitHub Actions (OIDC, manual prereq)

# Infrastructure parameters (must match Terraform configuration)
infrastructure:
  domain: timedevops.click
  backstageDomain: backstage.timedevops.click
  albGroupName: dev-platform
  clusterName: platform-eks
  awsRegion: us-east-1
  awsProfile: darede  # Change to your AWS CLI profile name
  environment: dev

apps:
  manifestsPath: "deploy"
  namespace:
    strategy: "per-app"
    template: "{{appName}}"
  defaults:
    arch: "arm64"  # arm64|amd64|multi

alb:
  sharedGroupName: "dev-platform"
  scheme: "internet-facing"
  targetType: "ip"

ci:
  authMode: "oidc" # static-keys | oidc
  ecrRepoPrefix: "idp-"
  imageTagStrategy: "sha"
  build:
    platforms:
      arm64: "linux/arm64"
      amd64: "linux/amd64"
      multi: "linux/arm64,linux/amd64"

scheduling:
  archLabelKey: "kubernetes.io/arch"
  armValue: "arm64"
  amdValue: "amd64"

identity:
  cognitoAdminEmail: admin@timedevops.click
  allowedEmailDomains: []  # Extra domains besides main domain

tags:
  Project: Internal Developer Platform
  Terraform: "true"

images:
  backstage:
    registry: 948881762705.dkr.ecr.us-east-1.amazonaws.com  # ECR registry (account-specific)
    repository: backstage-platform
    tag: "20260128-backstage-v1.47.1-authz"

charts:
  backstage:
    version: "2.6.3"  # Latest stable (verified 2026-01-27)
    repo: https://backstage.github.io/charts
  crossplane:
    version: "2.1.3"  # Latest stable (verified 2026-01-27)
    repo: https://charts.crossplane.io/stable
